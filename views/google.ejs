
<!DOCTYPE html>
<html>
<head>
    <title>Signin</title>


<script src="https://apis.google.com/js/platform.js" async defer></script>
<!-- <script src="../script.js"></script> -->
<meta name="google-signin-client_id" content="54507862157-mbvi9vip2rnr07iqhuosk77s7o2sb62o.apps.googleusercontent.com">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<style>
    .g-signin2{
     margin-left:600px;
     margin-top:10px;
    }
    .data{
        display:none;
    }
    .container {
  padding: 10px;
  /* background-color: white; */
}
</style>
</head>
<script>
  function signup(){
  window.location.replace("/register");}
  
</script>
<body>
    <form action="." >
        <div class="imgcontainer">
          <!-- <img src="img_avatar2.png" alt="Avatar" class="avatar"> -->
        </div> 
      
        <div align="center" class="container">
          <label for="uname"><b>Username</b></label>
          <input type="text" placeholder="Enter Username" name="uname" required>
          <br><br>
          <label for="psw"><b>Password</b></label>
          <input type="password" placeholder="Enter Password" name="psw" required>
          <br><br><br>
          <button type="submit">Login</button> 
          <br><br>
          <button type="button" onclick="signup()">Signup</button>
          <br><br><br>
          <label>
              <a href="/temp1"><img src="data:image/png;base64,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" width="171" height="34"></a>
     
            <!-- <input type="checkbox" checked="checked" name="remember"> Remember me -->
          </label>
        </div>
      
        <!-- <div class="container" style="background-color:#f1f1f1"> -->
          <!-- <button type="button" class="cancelbtn">Cancel</button>
          <span class="psw">Forgot <a href="#">password?</a></span> -->
        </div>
      </form>
    <div class="g-signin2" data-onsuccess="onSignIn"></div>
        
    <div class="data">
        <p>Profile details</p>
        <img id="pic" class="img-square" width="200" height="200"/>
        <p>User id:</p>
        <p id="id" > </p>
        <p>Name:</p>
        <p id="name" > </p>
        <p>Email id:</p>
        <p id="email" > </p>
        
        <button onclick="signout()" class="btn btn-danger"> Signout </button>
    </div>
</body>
<script>
function onSignIn(user)
{    
  
    var profile=user.getBasicProfile();

    var data={
                    name : profile.getName(),
                    password :profile.getEmail(),
                    email : profile.getEmail()
                };
                console.log(data);
                var xhttp = new XMLHttpRequest();
                xhttp.open('POST', '/google1', true);
                xhttp.setRequestHeader('Content-Type', 'application/json');
                xhttp.onreadystatechange = function(){
                    if(this.readyState== 4 && this.status == 200){
                        console.log(this.responseText);
                        var json=JSON.parse(this.responseText);
                        if(json.status=='present'){
                            
                            window.location.replace('/success2');
                        }else{
                            console.log("^^^^^^^^^^");
                            alert("User does not exists,please signup");
                           // document.getElementById('empid_present').innerHTML="*Employee-id has been already Registered";
                           var auth=gapi.auth2.getAuthInstance();
                            auth.signOut().then(function(){
                            auth.disconnect();
                            gapi.auth2.getAuthInstance().currentUser.get().reloadAuthResponse(); });
                           window.location.replace('/register');
                            
                            }       
                    }
                };
                xhttp.send(JSON.stringify(data));


                
         
}
function signout()
{
    var auth=gapi.auth2.getAuthInstance();
    auth.signOut().then(function(){
      auth.disconnect();
      gapi.auth2.getAuthInstance().currentUser.get().reloadAuthResponse();
     alert("Signed out successfully");
     $(".g-signin2").css("display","block");
     $(".data").css("display","none");
    });
}
</script>
</html>